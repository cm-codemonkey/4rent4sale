"use strict";$(document).ready(function(){var i="";var f=$("#link");f.change(function(){var n=document.getElementById("link");if(window.FileReader){var o=n.files[0];var m=new FileReader();if(o&&o.type.match("image.*")){m.readAsDataURL(o)}m.onloadend=function(){i=m.result;$("#imgLink").attr("src",i)}}});var h=$('form[name="new"]');var l=$('[data-action="new"]');l.on("click",function(){h.submit()});h.submit(function(p){p.preventDefault();var o=h.serialize();var n=tinymce.get("description");var m=tinymce.get("description_en");$.ajax({url:"",type:"POST",data:o+"&description="+encodeURIComponent(n.getContent())+"&description_en="+encodeURIComponent(m.getContent())+"&link="+i,processData:false,cache:false,dataType:"json",success:function(q){if(q.status=="success"){$("p.error").html('<img src="images/gif-load.gif" style="width: 25px;"/>');$("p.error").css("background-color","#388e3c");$("p.error").parent().show();l.parent().remove();window.location.href=q.path}if(q.status=="error"){$("p.error").html(q.message);$("p.error").parent().show()}}})});var k=$('form[name="edit"]');var g=$('[data-action="edit"]');g.on("click",function(){k.submit()});k.submit(function(p){p.preventDefault();var o=k.serialize();var n=tinymce.get("description");var m=tinymce.get("description_en");$.ajax({url:"",type:"POST",data:o+"&description="+encodeURIComponent(n.getContent())+"&description_en="+encodeURIComponent(m.getContent())+"&link="+i,processData:false,cache:false,dataType:"json",success:function(q){if(q.status=="success"){$("p.error").html('<img src="images/gif-load.gif" style="width: 25px;"/>');$("p.error").css("background-color","#388e3c");$("p.error").parent().show();g.parent().remove();location.reload()}if(q.status=="error"){$("p.error").html(q.message);$("p.error").parent().show()}}})});var j="index.php?c=blog&m=deleteEntries";var e=$('[data-action-modal="delete"]');multipleSelect(e,j,function(m){if(m.status=="success"){e.attr("disabled","");location.reload()}});var c;var d=$('[data-action="getPopularToEdit"]');d.on("click",function(){c=$(this).data("id");$.ajax({url:"index.php?c=blog&m=getPopularToEdit&p="+c,processData:false,cache:false,dataType:"json",success:function(m){if(m.status=="success"){$('input[name="popular_blog"]').val(m.data.popular_blog);$('input[name="popular_home"]').val(m.data.popular_home);$('div[data-modal-target-destination="editPopular"]').toggleClass("view")}else{if(m.status=="error"){alert(m.message)}else{location.reload()}}}})});var a=$('[data-action="editPopular"]');var b=$('form[name="editPopular"]');a.on("click",function(){b.submit()});b.on("submit",function(n){n.preventDefault();var m=b.serialize();$.ajax({url:"index.php?c=blog&m=editPopular&p="+c,type:"POST",data:m,processData:false,cache:false,dataType:"json",success:function(o){if(o.status=="success"){$("p.error").html('<img src="images/gif-load.gif" style="width: 25px;"/>');$("p.error").css("background-color","#388e3c");$("p.error").parent().show();location.reload()}if(o.status=="error"){$("p.error").html(o.message);$("p.error").parent().show()}}})})});