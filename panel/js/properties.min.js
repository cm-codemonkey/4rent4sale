"use strict";$(document).ready(function(){var x;var l="";var D="";var A=[];var k=[];var e;var c;var u=$('[data-action="hidden"]');var r=$("[data-hidden]");var f=$('input[name="rooms"]');var i=$('input[name="rooms_en"]');var B=$('input[name="m2"]');var s=$('input[name="m2_en"]');u.change(function(){r.toggleClass("hidden");f[0].value="";i[0].value="";B[0].value="";s[0].value="";A=[]});var o=$("#link");o.change(function(){var G=document.getElementById("link");if(window.FileReader){var H=G.files[0];var F=new FileReader();if(H&&H.type.match("image.*")){F.readAsDataURL(H)}F.onloadend=function(){l=F.result;$("#imgLink").attr("src",l)}}});var y=$("#pdf");y.change(function(){var G=document.getElementById("pdf");if(window.FileReader){var H=G.files[0];var F=new FileReader();if(H&&H.type.match("application/pdf")){F.readAsDataURL(H)}if(!H.type.match("application/pdf")){alert("this not a pdf")}F.onloadend=function(){D=F.result}}});var w=$('[data-action="sendArrays"]');$(window).load(function(){e=w.data("array1");c=w.data("array2");if(e!=null){A=e.split(",").map(Number);if(A==0){A=[]}}if(c!=null){k=c.split(",").map(Number);if(k==0){k=[]}}});var C=$('[data-action="sendChtc"]');var h=$('[data-action="sendAmtg"]');C.change(function(){x=$(this).data("id");var G=true;for(var F=0;F<A.length;F++){if(A[F]==x){A.splice(F,1);G=false}}if(G==true){A.push(x)}});h.change(function(){x=$(this).data("id");var G=true;for(var F=0;F<k.length;F++){if(k[F]==x){k.splice(F,1);G=false}}if(G==true){k.push(x)}});var b=$('form[name="new"]');var E=$('[data-action="new"]');E.on("click",function(){b.submit()});b.submit(function(I){I.preventDefault();var H=b.serialize();var G=tinymce.get("description");var F=tinymce.get("description_en");$.ajax({url:"",type:"POST",data:H+"&description="+encodeURIComponent(G.getContent())+"&description_en="+encodeURIComponent(F.getContent())+"&link="+l+"&chtc="+A+"&amtg="+k+"&pdf="+D,processData:false,cache:false,dataType:"json",success:function(J){if(J.status=="success"){$("p.error").html('<img src="images/gif-load.gif" style="width: 25px;"/>');$("p.error").css("background-color","#388e3c");$("p.error").parent().show();E.parent().remove();window.location.href=J.path}if(J.status=="error"){$("p.error").html(J.message);$("p.error").parent().show()}}})});var v=$('form[name="edit"]');var g=$('[data-action="edit"]');g.on("click",function(){v.submit()});v.submit(function(I){I.preventDefault();var H=v.serialize();var G=tinymce.get("description");var F=tinymce.get("description_en");$.ajax({url:"",type:"POST",data:H+"&description="+encodeURIComponent(G.getContent())+"&description_en="+encodeURIComponent(F.getContent())+"&link="+l+"&chtc="+A+"&amtg="+k+"&pdf="+D,processData:false,cache:false,dataType:"json",success:function(J){if(J.status=="success"){$("p.error").html('<img src="images/gif-load.gif" style="width: 25px;"/>');$("p.error").css("background-color","#388e3c");$("p.error").parent().show();g.parent().remove();location.reload()}if(J.status=="error"){$("p.error").html(J.message);$("p.error").parent().show()}}})});var t="index.php?c=properties&m=deleteProperties";var j=$('[data-action-modal="delete"]');multipleSelect(j,t,function(F){if(F.status=="success"){j.attr("disabled","");location.reload()}});var d=$('form[name="newSubproperty"]');var z=$('[data-action="newSubproperty"]');z.on("click",function(){d.submit()});d.submit(function(G){G.preventDefault();var F=d.serialize();$.ajax({url:"",type:"POST",data:F+"&link="+l+"&chtc="+A,processData:false,cache:false,dataType:"json",success:function(H){if(H.status=="success"){$("p.error").html('<img src="images/gif-load.gif" style="width: 25px;"/>');$("p.error").css("background-color","#388e3c");$("p.error").parent().show();z.parent().remove();window.location.href=H.path}if(H.status=="error"){$("p.error").html(H.message);$("p.error").parent().show()}}})});var a=$('form[name="editSubproperty"]');var q=$('[data-action="editSubproperty"]');q.on("click",function(){a.submit()});a.submit(function(G){G.preventDefault();var F=a.serialize();$.ajax({url:"",type:"POST",data:F+"&link="+l+"&chtc="+A,processData:false,cache:false,dataType:"json",success:function(H){if(H.status=="success"){$("p.error").html('<img src="images/gif-load.gif" style="width: 25px;"/>');$("p.error").css("background-color","#388e3c");$("p.error").parent().show();q.parent().remove();location.reload()}if(H.status=="error"){$("p.error").html(H.message);$("p.error").parent().show()}}})});var p=$('[data-action="getPopularToEdit"]');p.on("click",function(){x=$(this).data("id");$.ajax({url:"index.php?c=properties&m=getPopularToEdit&p="+x,processData:false,cache:false,dataType:"json",success:function(F){if(F.status=="success"){$('input[name="popular"]').val(F.data.popular);$('div[data-modal-target-destination="editPopular"]').toggleClass("view")}else{if(F.status=="error"){alert(F.message)}else{location.reload()}}}})});var n=$('[data-action="editPopular"]');var m=$('form[name="editPopular"]');n.on("click",function(){m.submit()});m.on("submit",function(G){G.preventDefault();var F=m.serialize();$.ajax({url:"index.php?c=properties&m=editPopular&p="+x,type:"POST",data:F,processData:false,cache:false,dataType:"json",success:function(H){if(H.status=="success"){$("p.error").html('<img src="images/gif-load.gif" style="width: 25px;"/>');$("p.error").css("background-color","#388e3c");$("p.error").parent().show();location.reload()}if(H.status=="error"){$("p.error").html(H.message);$("p.error").parent().show()}}})})});